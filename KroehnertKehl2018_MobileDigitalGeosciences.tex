\documentclass[review]{elsarticle}

\usepackage{lineno}
\modulolinenumbers[5]

\usepackage[UKenglish]{babel}
\usepackage[reqno,fleqn]{amsmath}	% erweiteter Formelsatz und zus�tzliche Mathe-Symbole
\usepackage{breqn}
\usepackage{amssymb}
\usepackage{amsfonts}
\usepackage[mathcal]{euscript} % For caligraphy fonts
\usepackage{dsfont}
\usepackage{makeidx}
\usepackage{tabularx}
\usepackage{longtable}

\usepackage{graphicx}
%\usepackage[pdftex]{graphicx}
% declare the path(s) where your graphic files are
%\graphicspath{{.},{./publishImages/}}
\graphicspath{{.},{./images/}}
\DeclareGraphicsExtensions{.pdf,.jpeg,.png,.tif,.jpg}
\usepackage[center,tight,footnotesize]{subfigure}

%\usepackage{lipsum}
%\usepackage{xcolor,colortbl,moreverb}
%\usepackage{color}
\usepackage[dvipsnames]{xcolor}
%\usepackage{shortvrb}
%\usepackage{url}
\usepackage[hidelinks]{hyperref}
\usepackage{booktabs}
%\usepackage[hidelinks,bookmarks=true]{hyperref}
%\usepackage{bookmark}
\usepackage[normalem]{ulem}

%\usepackage[pdftex,
%			backref,         % List citing occurences in the References
%			colorlinks,      % Colored links
%			citecolor=black,  % Color of cite links
%			linkcolor=black,  % Color of links
%			urlcolor=blue   % Color of urls
%			]{hyperref}

%\usepackage{ctable}
%\usepackage{gensymb}
%\usepackage{textcomp}
\usepackage{pdfpages}
%\usepackage{cite}
\usepackage{footnote}

\usepackage{lscape} % or {pdflscape}
\usepackage{longtable}
\usepackage{multirow}
\usepackage{color, colortbl}

%\definecolor{LinkColor}{rgb}{0,0,0.5}
%\definecolor{orange}{rgb}{1.0,0.5,0}
%\definecolor{ORANGE}{RGB}{255,165,0}
%\definecolor{green}{rgb}{0,0.61,0.33}
%\definecolor{blue}{rgb}{0,0.3,0.65}
%\definecolor{red}{RGB}{255,99,71}

%\usepackage{xargs}
%\newcommandx{\chris}[1]{{\color{blue} \textit{(C)} #1}}
%\newcommandx{\sophie}[1]{{\color{purple} \textit{(J)} #1}}
%\newcommandx{\change}[1]{{\color{orange} #1}}
%\newcommandx{\strike}[1]{\change{\sout{#1}}}

%\newcommandx{\chris}[1]{#1}
%\newcommandx{\sophie}[1]{#1}
%\newcommandx{\change}[1]{#1}
%\newcommandx{\strike}[1]{}

%\hyphenpenalty=0
\usepackage[acronyms,shortcuts]{glossaries}
\renewcommand*{\acronymfont}[1]{\mbox{#1}}
\hyphenpenalty=1
\tolerance=1000
%\let\oldnewacronym\newacronym
%\renewcommand\newacronym[3]{\hyphenation{#2}\oldnewacronym{#1}{#2}{#3}}

\hyphenation{Li-dar Map-ping and In-ter-pre-ta-tion En-vi-ron-ment}
\hyphenation{Dis-crete}
\hyphenation{In-ter-po-la-tion}
\hyphenation{di-gi-tal}
\hyphenation{ele-va-tion}
\hyphenation{mo-del}
\input{acronyms}

\journal{Computers \& Geosciences}

%%%%%%%%%%%%%%%%%%%%%%%
%% Elsevier bibliography styles
%%%%%%%%%%%%%%%%%%%%%%%
%% To change the style, put a % in front of the second line of the current style and
%% remove the % from the second line of the style you would like to use.
%%%%%%%%%%%%%%%%%%%%%%%

%% Numbered
\bibliographystyle{model1-num-names}

%% Numbered without titles
%\bibliographystyle{model1a-num-names}

%% Harvard
%\bibliographystyle{model2-names.bst}\biboptions{authoryear}

%% Vancouver numbered
%\usepackage{numcompress}\bibliographystyle{model3-num-names}

%% Vancouver name/year
%\usepackage{numcompress}\bibliographystyle{model4-names}\biboptions{authoryear}

%% APA style
%\bibliographystyle{model5-names}\biboptions{authoryear}

%% AMA style
%\usepackage{numcompress}\bibliographystyle{model6-num-names}

%% `Elsevier LaTeX' style
%\bibliographystyle{elsarticle-num}
%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}\setlength\emergencystretch{1.5em}

\begin{frontmatter}

\title{Interactive interpretation of 3D surfaces in field-based geosciences using mobile devices - concepts, challenges and applications}
%\title{Digital Geosciences on Mobile Devices - Concepts, Challenges and Applications}
%\tnotetext[mytitlenote]{Fully documented templates are available in the elsarticle package on \href{http://www.ctan.org/tex-archive/macros/latex/contrib/elsarticle}{CTAN}.}

%% Group authors per affiliation:
%\author{Elsevier\fnref{myfootnote}}
%\address{Radarweg 29, Amsterdam}
%\fntext[myfootnote]{Since 1880.}
%\ead[url]{www.elsevier.com}

%% or include affiliations in footnotes:
%\author[anonymous]{Anonymous\corref{correspondence}}
%\cortext[correspondence]{Corresponding author}
%\ead{anonymous}

\author[tudresden]{Melanie Kr\"{o}hnert\corref{correspondence}}
\cortext[correspondence]{Corresponding author}
\ead{melanie.kroehnert@tu-dresden.de}

\author[dtu]{Christian Kehl}
\ead{chke@dtu.dk}


\author[cerege]{Sophie Viseur}
\ead{viseur@cerege.fr}

\author[uniresearch,uib]{Simon J. Buckley}
\ead{Simon.Buckley@uni.no}

%\address[anonymous]{anonymous}
\address[tudresden]{Institute for Photogrammetry \& Remote Sensing, TU Dresden, Helmholtzstr. 10, 01069 Dresden, Germany}
\address[cerege]{Aix Marseille Universit\'{e}, CNRS, IRD, CEREGE UM 34, Dept. Sedimentary and Reservoir Systems, 13001 Marseille, France}
\address[uniresearch]{Uni Research AS -- CIPR, Nyg{\aa}rdsgaten 112, 5008 Bergen, Norway}
\address[uib]{Department of Earth Science, University of Bergen, All\'{e}gaten 41, 5007 Bergen, Norway}
\address[dtu]{Danmarks Tekniske Universitet, DTU Compute, Richard Petersens Plads, Building 321/208, 2800 Kongens Lyngby, Denmark}


\begin{abstract}

\end{abstract}



\begin{keyword}
discrete geometry\sep surface reconstruction\sep volume reconstruction\sep surface parameterization\sep digital outcrops
\MSC[2010] 00-01\sep  99-00
\end{keyword}

\end{frontmatter}

\linenumbers

\section{Introduction}
\label{sec:introduction}

A considerable number of domains within the geosciences rely on digitised natural observations and their interpretation to steer and constrain numerical models. Published (semi-)automatic interpretation methods emerged within the past decade that support the digital documentation of observations and interpretations. These advanced interpretation techniques require increasingly complex computing that is restricted to office-based work environments, which poses a problem for field-based studies. Domains such as hydrology, geology or glaciology hence established multi-stage procedures where observations are taken manually in the field and later digitised in the office. This is disadvantageous and within the referred domains, there is an increasing desire to facilitate digital interpretations in the field at the study location. Mobile computing equipment (e.g. smartphones and tablets) are one technological option to facilitate such digital field-based workflows. These devices are nowadays ubiquitous and can easily be equipped in field-based research. Also, as seen in technical magazines and the general media, the range of available devices continuously increases, which allows to find a ''fit-for-purpose`` device to each specific situation. New application cases, which are demonstrated and discussed in this article, and commitment within geoscience- and computer technology industry lead to an increasing interest in this cross-disciplinary domain between mobile computing and geoscientific interpretation.

%\begin{itemize}
%\item Many geosciences domains rely on natural observations and digitised interpretations thereof to steer and constrain numerical models
%\item many semi-automatic interpretation methods have emerged over the years that support digital documentation of observations and interpretations
%\item drawback of existing methods: reliance on computing equipment; the more powerful it is, the more stationary it is
%\item observations within hydrology, geology or glaciology are done outdoor experiments, which prohibit the use of bulky equipment
%\item the advent of mobile computing equipment, such as smartphones and tablets, enable digital interpretations being carried out in the field
%\item smart mobile devices are ubiquitous and easy to equip in field-based research
%\item as seen in technical magazines and the media, the range of available devices increases, which allows to find a device fit-for-purpose to each situation
%\end{itemize}

Next to easily available, pocket-format computing devices, the required three-dimensional base data for modern applications also need to be available and being processed in a ''mobile-ready`` manner. The availability of topographic 3D surface data is steadily increasing due to easy-to-use software and instrumentation for surface generation (e.g. drones, \gls{SfM} \cite{•} and multi-view geometry \cite{•}, satellite \glspl{DEM}). Furthermore, crowdsourced data and \gls{VGI} contribute to the geoscience data inventory, which is acquired by amateur scientists and domain enthusiasts.

%\begin{itemize}
%\item availability of small form factor devices is only on part contribution to making digital geosciences more ''mobile``
%\item appropriate 3D data needs to be available on these mobile devices to perform interpretations
%\item availability of 3D surface models increases, due to easy-to-use software and instrumentation (e.g. drones, \gls{SfM}, satellite \glspl{DEM})
%\item crowdsourced data and \gls{VGI} constitute to the geoscience data arsenal, being acquired from amateur scientists and novices interested in a particular domain
%\end{itemize}

Domain-specific mobile software is required in order allow for data interaction on the available mobile devices. Specific challenges such as power consumption, multi-manufacturer support, smart sensor utilisation and device intercommunication distinguish mobile software from common desktop software. This leads to a very different design electronics design of tablets and smartphones in comparison to desktop PCs and laptops, which in turn means that existing approaches for digital data processing and interpretation are not transferable as--is to this new computing domain. Even when considering the fast technological development, there are some challenges within mobile device software development that are rooted in the technology itself: user interfaces need to be specifically designed for mobile devices so to utilise touch screen interfaces, natural language interfaces and gesture interaction (e.g. ''swipe`` and ''optical lens`` motions). \gls{GNSS}-based geo-localisation accuracy, as delivered by the integrated-circuit sensor of mobile, is inferior to common user expectations and requirements in geoscientific studies. The modalities of sensor data delivery (be it hardware sensor or software emulation), photo capturing and processing, and the computational capabilities of mobile devices differ significantly between each vendors. Short-comings such as inappropriate data structuring, visual object correlation and registration, increasing data volumes and the unavailability of off-the-shelf program codes further complicate the technological development. Addressing the demonstrated challenges distinguishes the mobile application development and common desktop software development for geoscience purposes.

%\begin{itemize}
%\item In order to connect data and devices in the field, domain-specific mobile software is required
%\item specific demands and challenges, such as energy efficiency, multi-manufacturer support, smart sensor utilisation and device communication, distinguish mobile software from common desktop software
%\item existing approaches for data interpretation are not transferable as--is to mobile devices
%\item new application cases, which are demonstrated and discussed in this article, and an increasing interest from geoscience- and computer technology industry lead to an increasing interest in this cross-disciplinary domain between mobile computing and geoscientific interpretation
%\item Even considering the fast technological development, some challenges around mobile device development exists that are rooted in the technology itself
%\item user interfaces need to be specifically designed for mobile devices, utilising touch interfaces, natural language interfaces and gestures (e.g. ''swipe´´ motions)
%\item short-comings in geo-localization accuracy, object matching- and registration accuracy, geometric- and photometric data processing, data volumes and the availability of off-the-shelf program codes further complicate mobile device development
%\item technical details such as device variability, power consumption and computing efficiency (i.e. fast calculations with drastically limited computing capabilities) also need to be address during software development
%\item addressing the demonstrated challenges distinguish the complications domain-specific mobile application development pose in comparison to common desktop software
%\end{itemize}

This article demonstrates how the above-listed challenges can be addressed to provide, in the end, the desired added value for field-based research. This demonstration addresses the 3D data annotation and interpretation for two use cases within the domains of surface hydrology and (petroleum) geology. The content covered in the article is a detail-driven extension of earlier published research \cite{Kroehnert2017b}, focussing on extensive measurements to verify the reasoning and statements of previous studies.

%\begin{itemize}
%\item this article demonstrates how the above-listed challenges can be address on two use cases within the domains of hydrology and geology, adding the desired value to digital field-based observation and interpretation
%\item the content covered in the article is an detail-driven extension of earlier published research \cite{Kroehnert2017b}, focussing on extensive measurements to verify previous studies on a more general level
%\end{itemize}

The sections within this article adhere to the following structure: First, the use cases are presented as opening statements to introduce field-related tasks that are to be addressed with mobile device technology. Secondly, different 3D surface data representations are introduced that employed within this technical research. Thirdly, algorithmic baseline concepts that are key for interpreting 3D data on mobile devices are introduced, summarising project-internal development by the authors as well as referencing key literature on the subject. Fourth, the algorithms are mapped to the specific mobile technologies and components. The technologies and major parameters that impact the target use case application are highlighted. Finally, we showcase and discuss how available mobile systems are used in application scenarios from hydrology and petroleum geology to improve data analysis and integrate outdoor measurements in digital workflows. Then, the article is finalized with some concluding remarks and a discussion for future developments in this research trajectory.

%\begin{itemize}
%\item For the following sections, the article adheres to following structure:
%\item First, use cases are presented as opening statements to introduce task that are exclusively addressed by mobile devices in the digital geosciences
%\item Secondly, the different forms of 3D surface data representations are introduced that are in use within the digital processing presented in this article
%\item Thirdly, algorithmic baseline concepts that are key for interpreting 3D data on mobile devices are introduced, summarising project-internal development by the authors as well as referencing key literature on the subject
%\item Fourth, the algorithms are mapped to the specific mobile technologies and components. The technologies and major parameters that impact the target use case application are highlighted.
%\item Finally, we showcase and discuss how available mobile systems are used in application scenarios from hydrology and petroleum geology to improve data analysis and integrate outdoor measurements in digital workflows
%\item Then, the article is finalized with some concluding remarks and a discussion for future developments in this research trajectory
%\end{itemize}

\section{Target case studies}
\label{sec:case_studies}

TO-BE-FILLED

\section{Representation basis -- Geometry and Radiometry}
\label{sec:representations}

Various representation forms for 3D terrain data are available. While early digital systems used gridded \glspl{DEM} for their simplicity and compact storage \cite{Trinks2005,McCaffrey2005}, \glspl{DSM} and \glspl{TIN} are dominating most terrain-based systems for application-specific analysis \cite{Buckley2008a,Caumon2013}. Examples can be seen computing the impact of solar shade on glacial mass loss \cite{Marsh2012}, where the authors use high-quality Delaunay-\glspl{TIN} \cite{Shewchuk1996} as terrain representation. In this context, it is important to distinguish geometrically valid \glspl{TIN} from polygon soup surfaces. While the latter is often employed in early stages of mesh-based software systems due to its simplicity and ease of implementation, valid \glspl{TIN} are employed in mature stages of the analysis. This is because some automated analysis (e.g. auto-interpretation, volume derivation) require clean surfaces with coherently outward-oriented surface normals.

In geoscience domains such as petroleum geology, texture- and color information are vital for interpretation- and analysis tasks. In these cases, as demonstrated by Buckley et. al \cite{Buckley2008a} and Caumon et. al \cite{Caumon2013}, the \gls{TIN} is supplemented with photographic information that is projected on the surface as textures.% As it is also possible to project textures from outside the visible spectrum as supplementary information on the surface \cite{Kurz2011}, we generalize for the remainder of the article that the model in question consists of its geometric and radiometric information.

[ASK SIMON FOR USAGE OF IMAGES FROM VOG - use own reconstruction of Whitby cliffs for nice TINs]

\sout{In other geoscience domains, such as hydrology and free surface flow management, colored point data streams are used as models, which are provided by drones and \gls{SfM}. In general, applications that rely on data throughput and large-scale analysis more commonly employ colored ''point cloud`` models because of their rapid procvessing and the skip of surface triangulation. Presentation techniques (i.e. rendering) are in these cases adapted versions of \gls{PBR} \cite{Rusinkiewicz2000}. Examples of point-based surface analysis in hydrology can be found in Leskens et. al \cite{Leskens2015}, whereas \gls{VRGS} is an example software for petroleum geology that employs similar techniques (see Rarity et. al \cite{Rarity2014}).} \textbf{HERE MELANIE'S PASSAGE}



The stated base concepts of geometric representation and radiometric texture information are also valid for mobile device software. Because of the limited processing speed of mobile chipsets, the usage of point cloud appears most common within the graphics literature (e.g. Garcia et. al \cite{Garcia2015}). Because the sparse vertex distribution in point clouds causes problems in the data analysis, \glspl{DEM} have seen a revival in the mobile computing domain. \Glspl{DEM} provide dense, closed geometric models that can be rendered and processed very efficiently. Furthermore, with the inferior memory capacity of mobile devices in comparison to laptops and workstations, the possible compression options for point clouds and \glspl{DEM} are advantageous. Base mapping applications such as Google Maps use \glspl{DEM}, derived from \gls{LiDAR} or satellite data \cite{Farr2007}, as their main topographic data representation. Other systems within the geosciences processing 3D data on mobile devices, such as ''Outcrop`` and \gls{GRIT}, employ genuine textured triangulated \gls{DSM} from \gls{LiDAR}, drone or \gls{SfM} sources.

The chosen form of model representation significantly impacts the algorithms and analytical capabilities employed on the mobile device. Although all algorithms presented in this article work on either form of representation, some of the algorithms favour the treatment of triangulated surfaces (e.g. image-to-geometry registration, guided interpretation), while others clearly favour point-based representations (e.g. rendering).

\section{Algorithms}
\label{sec:algorithms}

This section demonstrates novel- as well as existing algorithms and methods on mobile devices that are used for solving analysis tasks in the geoscience use cases laid out in section \ref{}. As mentioned before, the effectiveness of each algorithm depends on the applied model representation.

%\subsection{Structure-from-Motion (SfM) and  Visual Simultaneous Localization and Mapping (Visual SLAM)}
%
%\begin{itemize}
%\item \sout{short description what it does}
%\item \sout{how is it generally employed}
%\item \sout{relation to mobile devices}
%\item \sout{approaches and implementation known on mobile devices}
%\item integration to the above-mentioned use cases
%\end{itemize}

%\gls{SfM} and visual \gls{SLAM} aim at automatically reconstructing a 3D environment from a stream of images \cite{•}. The output of these 3D reconstruction methods are colored point sets (i.e. point clouds). The technique is employed in the geosciences to acquire and measure 3D surfaces and terrain either via a manually collected photo set, or by using drones \cite{•}. The large potential for these algorithms on mobile devices being used directly in the field is that no other equipment was needed the generation of the digital 3D data used for analysis. A powerful mobile devices, such as the Project Tango\footnote{•} or NVIDIA Shield\footnote{•}, is capable of 3D terrain data collection in realtime directly in the field.

%Because of the large potential to all branches in the geosciences to deliver on-spot data acquisition, several research groups have conducted research into that topic. \textbf{FILL IN PARTS FROM THE THESIS HERE!}

%A problem with the listed approaches is their lack of maintenance. There is no readily-available software to this date in the mobile app stores that allows real-time SLAM or SfM. Reasons for the disappearance on previous prototypes can vary, but a major problem is the speed of development for mobile devices. As new operation system versions are published on a half-year to yearly basis, it means that software gets deprecated very rapidly. If no industrial partner cares to maintain and market a given research prototype, then that is vanishing from the mobile software market quickly.

\subsection{Image-to-geometry registration}

\begin{itemize}
\item \sout{short description what it does}
\item \sout{how is it generally employed}
\item \sout{relation to mobile devices}
\item \sout{approaches and implementation known on mobile devices}
\item integration to the above-mentioned use cases
\end{itemize}

Image-to-geometry algorithms aim at registering a 2D image to a given 3D surface, providing a transformation from 2D coordinate system to 3D coordinate system as follows:

\begin{eqnarray}
P' &= \begin{pmatrix}
u \\ v \\ w
\end{pmatrix} &= [ R_{3,3} | T_{1,3} ] \cdot P \\
P &= \begin{pmatrix}
x \\ y \\ z
\end{pmatrix} & \\
P' &\in \mathds{R}^2 &= \frac{P'}{w}
\end{eqnarray}

Using this coordinate system transformation on combination with a known interior camera orientation, it is possible to projectively map entire images on the surface just as surface texturing does. It is also possible to map specific objects on the image, such as image-based interpretations, on the surface. In the geosciences, these algorithms are employed to create a direct correlation between 3D model and the screen- or image space on which annotations and interpretations are based on \cite{Kehl2016_ISPRS}.

\begin{itemize}
\item feature-based registration: detect prominent points or edges in the input 2D images and a rendered representation of the 3D model
\item different concept for registration: 
\begin{itemize}
\item for mesh models, 2D feature locations are raycasted using camera projection and the 3D model in background; 3D feature location determined upon ray-plane intersection
\item for point-based models, raycasting doesn't directly work as point cannot be intersected; prominent solution is employing a smart rendering technique that expands the point into an area, and generate a depth map; after depth map generation, the 3D coordinate of a 2D feature map can be read directly from the depth map; drawback of the method / offset for speed: accuracy limitation of depth maps; high-resolution depthmaps (above $512^2$) cost a lot of performance
\end{itemize}
\item registration then has source- and target 2D-3D point pairs (in a normalized manner) that are put into a least-squares optimization system (give math here)
\item optimization system usually non-linear, usually employing Levenberg-Marquardt optimization schemes \cite{Kehl2015c}
\item largest challenges for feature-based registration: (a) reliable feature correlation and (b) optimization stability; useful constraints can employed in both cases -- such as horizon information, building edges, object outlines -- to increase the registration reliability and accuracy
\item employing constraints is highly application-dependent
\end{itemize}

\begin{itemize}
\item feature-based registration techniques most prevalent on mobile devices due to execution speed, implementation ease and so forth
\item examples of mobile implementation: \cite{Gauglitz2014,Sweeny2015,Kehl2017_PHOR,KroehnertXYZ}; utilize open source library \textit{OpenCV4Android}\footnote{OpenCV4Android - \url{https://opencv.org/platforms/android/}}, also employed in this work\footnote{OpenCV4Android extensions at \url{https://github.com/CKehl/opencv4Android_extension} and \url{}}
\item drawback of feature-based methods: reliability and instability to imaging variances (discussed later in this article)
\item a contrasting technique commonly achieving more accurate results: mutual information
\item idea: pixel-wise comparison between 2D input image and 2D rendering of 3D scene; if both images match (meaning: $argmin \delta(I_{2D}, I_{3D}')$), then registration is completed
\item mutual information \cite{Viola1997} use notion of self-information and entropy to measure $\delta(I_{2D}, I_{3D}')$
\item challenge: optimization of 7 degree-of-freedom system over such overdetermined system (i.e. each image pixel results in 2 equations for the optimization scheme) unstable and prone to local minima
\item only optimization known to provide stable results is NEWUOA (i.e. Powell's method) \cite{Corsini2013}; 
\item has recently been employed in an earth science case for \gls{LiDAR} registration \cite{Guislain2016}
\item not available for mobile devices until now
\end{itemize}

\begin{itemize}
\item in terms of usability on mobile devices (why should we want to have that on mobile devices), projection of image-based information is vital on mobile devices
\item because of interaction difficulty, image-based interpretations on 3D surface data is preferable
\item it is potentially advantageous, in terms of power consumption, to implement data interaction in 2D rather than 3D; a hypothesis proven by experiment in this article
\item as it directly relates to the interactive component of the geoscience app, it has to be executed in real-time on the device instead of an offline process
\end{itemize}

\subsection{Data presentation and rendering}

\begin{itemize}
\item \sout{short description what it does}
\item \sout{how is it generally employed}
\item \sout{relation to mobile devices}
\item \sout{approaches and implementation known on mobile devices}
\item integration to the above-mentioned use cases
\end{itemize}

\begin{itemize}
\item rendering the 3D model in this context refers to generation of image generation of 3D model by projective rasterization of model data to 2D imaging plane of a virtual camera
\item rendering is performed to view the 3D model on the mobile device
\item also employed to generate a reference image used in the image-to-geometry registration and the annotation and interpretation of the data
\item major concepts: mesh-based rendering and \gls{PBR}
\item technical details on how this is done covered in the technology section \ref{}
\end{itemize}

\subsubsection{Mesh-based rendering}

\begin{itemize}
\item well-known concept
\item mesh is transferred as vertex set and primitive set (i.e. triangles or polygons, depending on employing \gls{TIN} or polygonal soup geometry) to graphics processor
\item virtual camera is set up as projective view matrix
\item primitives are positions in 3D scene via model transformation matrix
\item rasterizer projects information to camera plane and transforms continuous data into discrete pixel-based representation
\item in-time decompression can be optionally employed (see \cite{Ponchio2016})
\item texturing is employed to map image information on the surface; correlation between surface patches and texture images established explicitly beforehand or implicitly defined by geographic coordinate systems (e.g. WGS84 or UTM) for georeferenced surface
\end{itemize}

\subsection{A novel approach to mobile point-based rendering}

\textbf{TO BE FILLED BY MELANIE}

\subsection{Interpretation and annotation}

\begin{itemize}
\item \sout{short description what it does}
\item \sout{how is it generally employed}
\item \sout{relation to mobile devices}
\item \sout{approaches and implementation known on mobile devices}
\item \sout{integration to the above-mentioned use cases}
\end{itemize}

\begin{itemize}
\item Interpretation and annotation techniques (in this context used synonymously) aim to map geometries (e.g. lines, polygons) of domain-specific information to the 3D base surface
\item the mapped geometries are used to delineate interest boundaries or segment the surface into semantically meaningful units
\end{itemize}

%this should be moved somewhere else POSSIBLY
\begin{itemize}
\item in hydrological cases, line interpretations are commonly used to mark current water levels as well as high-tide or high-surge water levels
\item for health monitoring of dykes and levees, line interpretations can also be used to mark cracks
\item in geological cases, a mixture of line- and polygon geometries is used
\item line interpretations are more commonly related to structural rock features (e.g. cracks, fractures, fault zone boundaries, stratigraphic boundaries), while polygonal area segmentation are more common in sedimentology (e.g. depositional elements, sedimentary objects, sediment facies); application of the geometries is flexible, as in the case of fault facies for structural features
\end{itemize}
%end of to-be-moved

\begin{itemize}
\item delineation and mapping can be performed in various ways, depending on the geometric representation of the 3D surface geometry
\item point clouds and 3D \glspl{TIN} can be annotated in 3D directly; area markings can be directly embedded as vertex attributes, whereas closest-vertex searches (for point clouds) or view-surface intersections (for \glspl{TIN}) provide the corners for line interpretations
\item largest problem with such approach on mobile devices: data size and neighbourhood searches; nearest neighbour search has computational complexity $O(nd)$ for $d=3$ (in case of 3D surfaces) and $n$ being the number of vertices in the dataset; non-interactive on mobile devices with real-world datasets ($n \geq 10^7$)
\item other issues: sparse and non-closed, non-convex geometry (particular problem for \glspl{TIN}), occlusions and curved objects; challenge specific to mobile devices: interaction, and the intuitive switch between 3D space motion and point selection
\end{itemize}

\begin{itemize}
\item using image-to-geometry registration, problems of 3D geometry and 3D space interaction can be circumvented
\item image interpretation more computationally efficient due to raster arrangement (i.e. raster image) and easier to use for novice practitioners on mobile devices
\item interpretation geometries rendered as 2D vector graphics elements and subsequently reprojected on 3D surface using the pre-determined external camera orientation (or pose)
\item distinction between one-time interpretation and editing
\begin{itemize}
\item fixed interpretation markings can be trivially generated
\item often approach is to delete the last marking (or manage an interaction history for further removals) and redraw incorrect interpretations
\item for \gls{GRIT}, more than 1,000 interpretation vertices need to be managed and edit requests are made by geologists; to facilitate a rapid edit and responsive interaction, a kD-Tree is maintained in the background to speed up interpretation vertex selection; kD-Tree is recalculated on significant point movements
\end{itemize}
\end{itemize}

\section{Technology}
\label{sec:technology}

\subsection{Sensors}

\subsubsection{Localization}

\begin{itemize}
\item references: ...
\end{itemize}

\subsubsection{Orientation}

\begin{itemize}
\item stability IMU (see 3D-NO)
\item precision IMU
\end{itemize}

\subsubsection{Parameter sensitivity}

\subsection{Graphics}

PUT SOMEWHERE HERE A REFERENCE TO osgAndroid AS EMPLOYED RENDERING LIBRARY

\begin{itemize}
\item as explained above, rendering 3D data is a key part for conducting annotations on 3D data, either based on 3D geometry itself or correlated images in camera space
\item for mobile devices, this can technologically be realized two-fold, depending on the usage constraints
%\item software- vs hardware renderer
\item generally, rendering stages (image-place projection, rasterization, tesselation \& lighting, see \cite{Kessenich2016}) can be realised by means of software or by handware support
%\item in a software environment, the rendering stages are computed on the CPU
\item here, compute operations (gaussian smoothing, derivative computations, vertex projection) are implemented on the mobile device CPU by available operations and libraries using the Android SDK (Java) and Android NDK (C++) on Google's Android system and Swift and Objective-C on Apple's iOS platform
\item software-based rendering is more flexible in how operations are carried out as they do not need to account for hardware-specific processing pipelines; in the realm of mobile devices, non-standard software-based rendering operations are supported by a wider range of devices
\item drawback of software-based rendering is performance as it makes suboptimal use newer computing capabilities and graphics-specific chipset operations
\item example is the novel rendering approach for point-based rendering introduced in section \ref{}, which requires implementation flexibility
\item most 3D rendering is done, even on mobile devices, with hardware-based rendering to varying degrees
\item even when implementing specific rasterization algorithms (see section \ref{}), operations such as vertex projections and tesselation \& lighting are performed on the GPU
\item hardware-based rendering on mobile devices is facilitated by Khronos' \gls{GLES} \cite{Mehta2013} on specialised mobile device graphics chips (e.g. Qualcomm Adreno, ARM Mali, NVIDIA Tegra)
\item in comparison to software-based rendering, hardware acceleration provides improved performance
\item drawbacks of hardware implementations are considerably longer development cycles, because the programming principles of GPUs differ considerably from common ''App programming´´, and reduced flexibility on what can be realised
\item for geoscientists and domain experts in the field, the distinction is good to be aware of as accelerated graphical apps for solving domain-specific tasks are usually offered as paid services to offset the increased development costs
%\item web-rendering - REWRITE
\item external circumstances and project constraints may govern implementation details for graphical systems
\item major constraint imposed in this context is internet availability
\item applications that are expected to operate in an urban setting or in well-developed infrastructure environments can make use of internet access
\item this allows the externalisation of rendering tasks for 3D models and data to a network-oriented client-server architecture as in Ponchio et al. \cite{Ponchio2016}
\item field experts that use apps and require 3D-rendered information can submit rendering requests to a remote server that takes over the image generation of the 3D data
\item technically, the app then only transmits metadata about storage location of the 3D data and receives the final, rasterised image, which allow energy-efficient operability 
\item furthermore, the process is agnostic to the specific mobile device generating the request, so this way of implementation works in the exact same manner for all mobile device regardless of the system manufacturer (e.g. Google, Apple, Microsoft)
\item the reduced process load by externalising the rendering tasks allows using advanced algorithms for sensor tracking \cite{} for improved localisation and orientation or augmented reality \cite{} for information overlays and multimedia content
%\item rendering-on-device
\item in other geoscientific settings, such as field geology \cite{} and environmental monitoring \cite{} of remote areas, internet access is either restricted or expensive to establish
\item subscription to satellite network with the required data rate costs around 70 euro per month \$ (see \url{www.skydsl.eu}, skyDSL2+ flatrate with 30 MBit/s download); data rate needed as high-resolution images with real-time rendering rates (uncompressed 1920x1080 pixels resolution at 30 frames/s amounts to 1.39 GBit/s) requires highest data rates even when employing advanced compression techniques
\item thus, for geoscience applications that operate in remote areas, web-based rendering is not an option
\item in these cases, rendering needs to be done on the device
\item for on-device rendering, the 3D data need to reside in the device memory and image generation needs to be done with performance-restricted hardware
\item as is shown in section \ref{}, on-device rendering has considerable impact on the energy consumption
\item on-device rendering that processes realistic field data requires considerable implementation efforts, as demonstrated by apps such as OpenWaterLevel \cite{}, GRIT \cite{Kehl2016_VGCabstract} and Outcrop \cite{Viseur2014_VGCabstract}
\item principle scientific advances in mobile device rendering have demonstrated considerable progress over the years \cite{Garcia2015,Kehl2015c,Agus2017}
\item scaling up smaller laboratory results with mobile graphics to realistic geoscience data, in terms of image quality and resolution as well as 3D base data, is a persisting challenge
\item although technical development continuously provides more powerful devices, mobile devices need to sacrifice capabilities such as sensor availability as well as physical size and weight in order to provide larger memory space and higher-performance processors; examples for this trade-off manufacturing can be seen in special-purpose and high-performance tablets such as NVIDIA Shield\footnote{NVIDIA Shield - \url{https://developer.nvidia.com/develop4shield}}, Project Tango resp. ARCore\footnote{Google Augmented Reality - \url{https://developers.google.com/ar/}} and Google Pixel C\footnote{Google Pixel C- \url{https://www.android.com/tablets/pixel-c/}}
%\item hardware differences: speed, capability, CUDA
\item an specific problem for geoscientists and domain experts in on-device rendering settings: trade-off between app response time, image quality, hardware utilization and cross-device operability
\item in interviews amongst field geologists at the department of earth science at university of Bergen, a major demand from the target user base of such mobile app is interoperability between Android, Microsoft and Apple devices; demand originates from platform-agnostic working of common geoscience software on desktop computers for Apple and Windows
\item on the other hand, app responsiveness and high image quality are amongst the next common priorities behind interoperability; user base asks for improved quality when operating advanced equipment (e.g. special-pirpose tablets, novel- and high-performance tablets)
\item both demands are conflicting, as making use of specialised hardware (e.g. 64-bit, \gls{SSE} and vectorisation, parallel processing and \gls{GPU} Computing such as CUDA\footnote{CUDA - \url{https://developer.nvidia.com/cuda-zone}} for image processing \cite{Heymann2007,Hudelist2014}, texture compression \cite{Chait2015}) in turn means reducing the range of devices being able to operate the software
\item these technologies are key as they provide technical solutions available right now to achieve the required responsiveness and image quality
\end{itemize}

%\subsection{Component differences between devices}
%
%\begin{itemize}
%\item camera
%\end{itemize}

\subsection{Power consumption}

\begin{itemize}
\item power consumption is a metric of major importance for mobile field applications
\item metric governs the operation time of an app outdoors for specific studies; in application domains such as field geology, the target operation time is in the range of four to eight hours without recharging at an electricity plug
\item for the use cases of waterline detection and field interpretation, we measured the energy consumption of the apps ''OpenWaterLevel'' and ''GRIT'' and its relation to technical indicators, such as \gls{CPU}- and \gls{GPU} utilisation, memory consumption and environment measures that influence chip operations, namely the processor temperature
\item the following measures for both apps were obtained on a Google Nexus 5 smartphone with 4-core ARM Cortex \gls{CPU} and Qualcomm Adreno \gls{GPU}; furthermore, OpenWaterLevels and its \gls{CPU}-related measures were validated on a Samsung S8 smartphone with an 8-core ARM Cortex \gls{CPU} of newer generation
\item currently, the only app available on Android that allows measuring metrics on an app-specific level (i.e. logging the power consumption related to just one specific external app) is the Trepn Profiler \footnote{Trepn Profiler - \url{}}
\item while this profiling app runs on all Android devices, the metrics that can be recorded (e.g. \gls{GPU} load, processor temperature) vary between devices, so that \gls{GPU} load measurements are not available for the Samsung S8 smartphone
\item also the reason why measurements have been carried out on Google smartphones instead of other tablets; general insight on processor-power consumption behaviour are possible to be extrapolated to other devices
\end{itemize}

\begin{itemize}
\item in the first test, we compare the power consumption in relation to \gls{CPU}- and \gls{GPU} utilisation
\item our initial expectation is the a higher \gls{GPU} load results in an increased power consumption compared to \gls{CPU}-dominated operations, because mobile \glspl{GPU} draw more power than \glspl{CPU} to realise the increased graphics performance
\item the results are shown for GRIT during 6.5 minutes of operations in fig. \ref{} (split in \gls{GPU} and \gls{CPU} contribution) and for OpenWaterLevel during 3.5 minutes of operations in fig. \ref{}
\end{itemize}

\begin{itemize}
\item observable in both apps: a clear dependency with \gls{CPU} load and power consumption; shows that apps enter a state of conservative energy consumption if being inactive
\item furthermore, when comparing \gls{CPU}-dependent and \gls{GPU}-dependent energy graphs, we observe that peak energy consumption strongly relates to \gls{GPU} activity
\item for measurements in ''\gls{GRIT}'', we also have to distinguish between two operation modes
\item actions such as image-to-geometry registration \cite{} and 3D outcrop viewing employ 3D data processing and \gls{GPU} computations in a major scale, while the image-based interpretation of an outcrop uses 2D image operations within Android-optimized data structures
\item fig. \ref{} and \ref{} depict the 2D use case, whereas fig. \ref{} and \ref{} show the energy consumption in 3D operations
\end{itemize}

\begin{itemize}
\item as clearly observable in fig. \ref{} in comparison to fig. \ref{}, the 3D operations result in a drastic energy cost, raising the average power consumption by XYZ mA
\item in contrast to novice expectation, the \gls{CPU} load also increases in a 3D data processing setting
\item that is because the \gls{CPU} of the mobile processor needs to deliver the geometric- and texture data to the \gls{GPU}; also, the \gls{CPU} needs to decompress the texture image files, resulting in a higher processing load
\end{itemize}

\begin{itemize}
\item conclusions from the measurements are manifold
\item on the level of assessing the profiled apps ''OpenWaterLevel'' for hydrological studies and ''\gls{GRIT}'' for field geology studies, we obtained benchmark measures for their power consumption
\item for OpenWaterLevels, the app can be operated with an average of XYZ mA per minute (XYZ mA/h), allowing a theoretical operability on a Google Nexus 5 smartphone of XYZ hours
\item for \gls{GRIT}, we distinguish between 2D- and 3D operability
\item in 2D operation mode, only conducting image-based interpretations, \gls{GRIT} consumes XYZ mA per minute (XYZ) per hours, allow XYZ hours of operation
\item on the other hand, if being operated consistently in 3D-mode, the same app consumes XYZ mA per minute (XYZ) per hours, allow only 0.something hours of operation
\item more generally speaking, the study shows that it is important for geoscience users to be aware of the which data they are working with on the mobile device
\item even though 3D may be readily available for a given study, it is not advisable to access them on the mobile device over stretched periods, as the drastically increased power consumption results in an operation time of XYZ hours with two external power packs in the field bag
\item considering the \gls{CPU} load behaviour in 3D-mode, we can also hypothesize about the positive impact of utilising hardware-specific operations such as \gls{GPU} texture decompression on energy consumption: while using the \gls{GPU} requires generally more power, it is also more efficient in operations such as texture decompression, therefore potentially having a positive affect on the overall power consumption of mobile field apps
\end{itemize}

\section{Applications and Requirements}
\label{sec:applications}
Due to the increasing usability of mobile devices for in the field annotations, several use cases concerning geosciences has become apparent. In the following, two essential 

\subsection{Derivation of hydrological parameters: Water level gauging}
\label{sec:water_level_gauging_intro}
The last decade is characterized by a continued increase of globally devastating flash floods after heavy rainfalls. Even smallest creeks turned into hazardous streams causing flooding and landslides. Conventional gauging stations provide precise information about water levels measured over a short time period. State of the art techniques for administrative observation comprise water pressure sensors, floating gauges and conventional tide gauges. They are characterised by long-term stability and outdoor robustness providing accuries of several millimeters up to one centimeter \cite{Siedschlag2015}. Averaged over defined time intervals, it is advisable to remain caution regarding these accuracies may be too optimistic \cite{Horner2018} . 
 
Because of high costs in purchase and maintenance, gauging stations with complex sensing devices must be sparsely installed. A prime example here is the hydrological network in Saxony, Germany. Here, 184 gauging stations are installed for permanent observation on 154 of 259 rivers rising from small, medium and large catchments \cite{Saxon2018, Buettner2015}. Thus, around a third is not monitored neither during flood events when the most protection is required. Recently, commercial smartphone applications arose to enable crowd-sourcing based water level estimation for, among other things, such cases \cite{CrowdWaterApp2017a, Kisters2014}. But all of them have one thing in common: the water level is entered manually by engaged citizen scientists finding and photographing tide gauges close to rivers that makes - on the one hand a potential danger to themselves (f.e. by sudden landslides), and still limits on the other the approaches to open and visible gauges.

Improvements in this sense can be achieved through \textit{image-2-geometry intersection} and 3D annotation for automatic water level determination without reference gauges for almost every situation regarding running waters. 
for this, the smartphone application \textit{Open Water Level} that bases on the freely available open source camera framework \textit{Open Camera} \cite{Harman2017}. Open Water Level allows for free stationing water line detection using short hand held time-lapse image sequences (for details please refer to \cite{Kroehnert2017}). To interpret these, image measurements must be transformed into object space. Thus, exterior information needs to be provided by smartphone sensors for orientation and positioning.

\subsubsection{Requirements applying to the sensors}
\label{sec:water_level_gauging_requirements_sensors}
To solve the task of autonomous water level determination on running rivers f.e. emergency cases using \textit{image-2-geometry intersection}, citizen scientists position and orientation must be know. As figured out in \ref{sec:technology}, smartphone sensors accuracies for orientation and location are highly dependent on user's environment. Especially the strong correlation of heading and disturbing magnetic sources may be a issue must be solved specifically related to running rivers where metal railings usually exists. Similar effects can also be noted using high-end IMU systems for instance autonomous car navigation. But the magnetic influences inside cars are almost stable and can be calibrated during the drive (advanced navigation manual). For smartphone orientation, the magnetic strengths attaching the phone may change substantially in short time. A typical scenario would be: a citizen scientist walks along street, taking his phone inside the baggage close to metallic keys. While walking he passes several street lamps, signs, etc. Finally, he arrives at a bridge over a urban river, takes out the phone, looks down to the river and records the time lapse image sequence a few centimetres above a metallic railing. Meanwhile, several cars passing the same bridge. In this simple use case, the magnetic field around the smartphone changes countless times due to several unpredictable disturbances \textcolor{red}{(table_mag_disturb)} \cite{Blum2013}.
\\The heading angle has the highest influence compared to pitch and roll regarding 2D image and 3D object data registration. For this, a so-called synthetic image is rendered from colored 3D reference point clouds using scientist's location and orientation to define a situation-dependent bounding box of points to be projected onto image plane with respect to depth and indentations (see \cite{Boerner2016}). Thereby the heading defines the rotation of the depth direction, as a false angle gives a false viewing direction resulting in a synthetic image that has no similarity or only a little with the time lapse sequence. However, in case of no similarity and thus no possible solution for \textit{image-2-geometry intersection}, simply no water level can be calculated. But in case of slight overlapping, there might be image matches but with very bad distribution that impedes a correct positioning \textcolor{red}{(fig_heading_test)} and may lead to even worse results of false water levels.
\\It is obvious that a second source for destructive results exists: the absolute geo-positioning using smartphones currently installed GNSS receivers. In urban scenes with several shadow effects due to high-rise buildings, errors of several meters in latitude and up to more than 30 meters in height are highly possible where even the weather has impact \cite{Bauer2013, Blum2013, Zandbergen2011}. It is likely that, in the near future, smartphone's GNSS modules will be improved solving lateral accuracies of 50 centimetres \cite{Moore2017}.\\
For now, possible relief might come including other sources for positioning like digital elevation models for simple height correction or invoke map services that allows the user for position refinement. For this, some APIs are already provided by Google \textcolor{red}{(quellen)} but they are rather cost-expensive by extensive accessing. Another upcoming option is including barometers in sensor fusion, altitude can be measured within three meters \cite{Liu2014} but for now, they are not a standard.


\begin{itemize}
\item(table, observation heading during water line detection outside $\rightarrow$ check magnetic strengthens and there changes over short times)
\item (figure/table, sensitivity analysis  $\rightarrow$ heading changed in terms of 10 degrees, what does it make for)
\end{itemize}


\subsubsection{Requirements applying to the scenario}
\label{sec:water_level_gauging_requirements_situation}



\begin{itemize}
\item \textit{online processing and position refinement: need online connection}
\item \textit{image quality for water line detection: influence of image resolution, lightning, ...)}
\end{itemize}





\begin{itemize}
%\item recap: task to be solved
%\item main requirements for (location- and orientation) sensor accuracy and geometric accuracy
%\item specific requirements to this use case: data availability; illumination; device range to cover
\item available approach to address the task
\end{itemize}

\subsection{Field Geology}

The goal of geological fieldtrips is to gather insight in the rock record and the structural- and sedimentary rock architecture of a given location. Rock architecture can be studied within subsurface seismic records, but this approach suffers from inferior imaging resolutions and physical limitations of the surveying technique. Therefore, surface outcrops are used for the study. Outcrops can be scanned with modern equipment (e.g. \gls{LiDAR} \cite{Buckley2008a,Buckley2010}, drones \cite{Dewez2015} and \gls{SfM} \cite{Chandler2016}) to generate digital surface representations. The most common representations of digital outcrops are coloured point clouds and textured \glspl{TIN}.

The geological aspect is introduced by interpreting the outcrop models. In this case, interpretations refer to (i) line marks for separating stratigraphic layers, (ii) surface-projected polygons to highlight structural- and sedimentary facies or specific architectural elements and (iii) minor ticks (e.g. lines, points, patterns) to indicate depositional attributes such as deposition orientation or grain geometry. The interpretations was until recently performed in a two-step process: sketches are drawn by hand in the field to document the field geologist's observation of the architecture. After the fieldtrip, the observations are digitalised in the office by transferring the sketched architecture on the available digital outcrop. From there on, further study goals (e.g. geomodelling) are pursued. As recently published, this workflow is currently being transformed into an integrated digital workflow in the field using mobile devices (see \cite{Kehl2018_AGU} for further details).

Geological interpretations can be documented on various scales, but from observations of the author most interpretations are conducted on medium-range. This results in an average observation distance for architectural interpretations of between $100m to 500m$ to document individual depositional elements and further distances of around $400m to 1400m$ to document the overall stratigraphic framework of an outcrop. Therefore, as a result of perspective observations, the required lateral localisation accuracy is in the range of $\leq 2.5m$ for the individual element setting and $\leq 8m$ for the wide-angle stratigraphic setting. While achieving the former resolution can still be challenging with mobile sensors (see section \ref{}), the latter resolution is almost guaranteed for GPS localisation. The more important problem is in the vertical resolution: the vertical observation position has, especially in close-distance observations, a drastic impact on the view perspective. Even more important, a vertical localisation error of  $\geq 1.5m$ may result in positioning the mobile device ''under ground'', making any image-based registration impossible. It is this vertical accuracy that is crucial for mobile device interpretation systems to work. Several improvements, such as \glspl{DEM} and barometric altitude \cite{Kehl2017_VGC}, have been proposed to reduce the vertical positioning error while there is still room for novel research proposals to provide more accurate vertical positioning or ground-based constraints on the altitude estimation.

One of the dominant challenges for digital field geology is the free availability of 3D surface models. Currently, research groups in the domain (e.g. from the University of Manchester, Durham University, University of Aberdeen, University of Bergen and UniResearch CIPR) are building their own digital outcrop databases. Due to the strong industry involvement, these and other databases (see SAFARI \cite{Dreyer1993} and FAKTS \cite{Colombera2012a}) are excluded from public access. Recent developments aim at providing digital outcrops in an open-access manner \cite{Cawood2018} to resolve the issue. Furthermore, due to the vertical positioning problem above, easy access to high- and medium resolution \glspl{DEM} is important. As demonstrated by recent measurement, the usage of \glspl{DEM} has a significant influence on the projection accuracy of image-based interpretation on mobile device towards 3D surface models \cite{Kehl2017_VGC}.

One particular challenge in digital field geology is the treatment of environmental changes. Digital outcrops are infrequently collected and the textured models are used for field study all across the year. Therefore, in image registration terms, there is a drastic difference in local illumination, moisture content as well as fog and snow between acquired 3D surface models and the outcrop images collected during field trips. The issue has been previously discussed in terms of illumination differences \cite{Kehl2017_PHOR}, but drastic changes in terms of fog and moisture are still problematic to treat. Therefore, it is advisable to collect digital outcrop models for prominent locations in different seasonal conditions to allow for variety in model selection when planning field trips.

Currently available systems that provide digital outcrop interpretation capabilities on mobile devices in 3D include \gls{GRIT} \cite{Kehl2016_VGCabstract} and Outcrop \cite{Viseur2014_VGCabstract}, though earlier prototypes have been demonstrated \cite{Hama2013}. Outcrop, developed by \gls{CEREGE} at Aix-Marseille Universit\'{e}, is a mobile device app for Android devices that is able to load and process various forms of numerical outcrops. Its major focus is the documentation of structural features (e.g. fault areas, fractures and rock deformations) on outcrops using line interpretations. Furthmore, it is possible to pin extended note annotations to the model. \gls{GRIT}, developed as a collaboration between UniResearch AS CIPR, University of Bergen, University of Aberdeen and \gls{CEREGE}, is a mobile device app for Android devices that can handle large-area digital outcrops of tens of kilometres is surface length in 3D. Its major focus is the documentation of the sedimentary- and stratigraphic architecture (e.g. strata boundaries, depositional object envelopes, facies areas) on outcrops via lines, polygons and brushes. The interpretations are mapped in a 2D-3D interplay between outcrop surface and field photograph.

[comparison photo: GRIT and Outcrop]

\begin{itemize}
\item \sout{recap: task to be solved}
\item \sout{main requirements for (location- and orientation) sensor accuracy and} geometric accuracy
\item \sout{specific requirements to this use case: data availability; illumination;} network inavailability
\item \sout{available approach to address the task}
\end{itemize}

\subsection{Virtual Field Trips}

\begin{itemize}
\item recap: task to be solved
\item main requirements for (location- and orientation) sensor accuracy and geometric accuracy
\item specific requirements to this use case: data availability; illumination; network inavailability
\item available approach to address the task
\end{itemize}

%\subsection{The digital fieldbook}
%
%\begin{itemize}
%\item recap: task to be solved
%\item main requirements for (location- and orientation) sensor accuracy and geometric accuracy
%\item specific requirements to this use case: device range to cover; data integration; no network
%\item available approach to address the task
%\end{itemize}


\section{Conclusions}
\label{sec:conclusions}

This article assessed the possibility of interactive interpretation and annotation of 3D outcrops on mobile devices in multiple geoscientific domains. Due to the research effort in recent years, novel mobile applications such as OpenWaterLevels for surface hydrology and \gls{GRIT} for field geology were introduced to the community to bridge the gap between lab assessment and outdoor field work for data interpretation. This article also showed further application areas that build upon mobile device technology and the interactive annotation of 3D surface data for geoscientific problem solving.

McCaffery et al. proposed the use of mobile devices for field interpretation in geology in 2005 \cite{McCaffrey2005}. The technological specifics of mobile device app development hampered the progress on this goal for years. Only recent advancements in efficient treatment of 3D data \cite{Kroehnert2017}, algorithmic proposals for image-to-geometry registration (see \citep{Gauglitz2014,Kehl2017_VGC}) and on-device 3D rendering (as presented in \cite{Agus2017} and in this article for point-based surface) specifically designed for mobile devices make the actual use for geoscientific applications in the field possible. The utilisation of crowdsourced \gls{VGI} and introduction of mobile devices as low-cost measuring devices for real-world problems \cite{Eltner2017} contribute to the acceptance of this mobile device technological development within the geoscientific community. Computer Vision challenges such as image registration under changing illumination conditions and with reduced image resolution can be viewed as ''sufficiently solved'' to make photogrammetric- and vision-based algorithms applicable to real-world outdoor settings, while still leaving space for improvement and quality and performance.

The measurements found in this article as well as its related studies suggest that localisation and orientation of mobile device sensors with respect to the application-specific accuracy requirements is a persisting challenge. The sensors employed by low-cost devices have accuracy limitations. Sensor filtering- and fusion techniques are required to even moderately consider the use of such sensor data. Environmental effects such as device-internal heating processes and the system-internal handling of sensor initialisation further complicate the calibration of such sensors without user involvement.

Furthermore, this study gives a representative overview about the energy consumption of mobile apps employing 3D surfaces, computer vision and computer graphics procedures. It was shown that the distinction between 2D- and 3D data used by mobile apps significantly drives the power consumption, and therefore the operation time of the mobile field apps during a study. Means of reducing the power consumption in the future have, next to extended periods of app use by domain experts, beneficial secondary effects: power-reduced main functions of the mobile app allow energy-expensive \gls{SLAM} techniques to be used for sensor data augmentation. %While bringing the visual data acquired by \gls{SfM}, drones, \gls{LiDAR} and satellites to the field allows direct data interpretation and eliminates the need for subsequent, tedious digitalisation, it requires a degree of planning from the expert user to avoid unnecessary power drainage. For crowdsourced hydrological waterlines, 

Lastly, the treatment of vegetation within scanned- and photographed data during mobile field studies remains a challenge in the context of interactive interpretation. 3D reference data are obtained less frequent than they are used in a given outdoor setting. Vegetation itself is visually dynamic content that complicates image registration to existing 3D data, which complicates interpretations in common outdoor settings. While current procedures of data processing try to segment- and remove vegetation data from scans \cite{}, it leaves the mobile device app less information to work with when registering photos. Therefore, proposing means of 3D topographic data processing that homogenizes vegetation in 3D scans and photos without removing the related data will have an impact on accurate outdoor photo registration on 3D base data.

%which problems are sufficiently solved ? 
%which challenges remain that have already been discussed

\section{Discussion}
\label{sec:discussion}

\begin{itemize}
\item porting existing desktop algorithms on mobile devices [quick and fast]
\item pre-processing of geodata for mobile use
\end{itemize}

\section*{References}

\bibliography{KroehnertKehl2018_MobileDigitalGeosciences}

\textbf{Highlights} \\
\begin{itemize}
\item point 1
\item point 2
\item point 3
\item point 4
\item point 5
\end{itemize}

\end{document}
