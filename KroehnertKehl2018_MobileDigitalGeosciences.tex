\documentclass[review]{elsarticle}

\usepackage{lineno}
\modulolinenumbers[5]

\usepackage[UKenglish]{babel}
\usepackage[reqno,fleqn]{amsmath}	% erweiteter Formelsatz und zusï¿½tzliche Mathe-Symbole
\usepackage{breqn}
\usepackage{amssymb}
\usepackage{amsfonts}
\usepackage[mathcal]{euscript} % For caligraphy fonts
\usepackage{dsfont}
\usepackage{makeidx}
\usepackage{tabularx}
\usepackage{longtable}

\usepackage{graphicx}
%\usepackage[pdftex]{graphicx}
% declare the path(s) where your graphic files are
%\graphicspath{{.},{./publishImages/}}
\graphicspath{{.},{./images/}}
\DeclareGraphicsExtensions{.pdf,.jpeg,.png,.tif,.jpg}
\usepackage[center,tight,footnotesize]{subfigure}

%\usepackage{lipsum}
%\usepackage{xcolor,colortbl,moreverb}
%\usepackage{color}
\usepackage[dvipsnames]{xcolor}
%\usepackage{shortvrb}
%\usepackage{url}
\usepackage[hidelinks]{hyperref}
\usepackage{booktabs}
%\usepackage[hidelinks,bookmarks=true]{hyperref}
%\usepackage{bookmark}
\usepackage[normalem]{ulem}

%\usepackage[pdftex,
%			backref,         % List citing occurences in the References
%			colorlinks,      % Colored links
%			citecolor=black,  % Color of cite links
%			linkcolor=black,  % Color of links
%			urlcolor=blue   % Color of urls
%			]{hyperref}

%\usepackage{ctable}
%\usepackage{gensymb}
%\usepackage{textcomp}
\usepackage{pdfpages}
%\usepackage{cite}
\usepackage{footnote}

\usepackage{lscape} % or {pdflscape}
\usepackage{longtable}
\usepackage{multirow}
\usepackage{color, colortbl}

%\definecolor{LinkColor}{rgb}{0,0,0.5}
%\definecolor{orange}{rgb}{1.0,0.5,0}
%\definecolor{ORANGE}{RGB}{255,165,0}
%\definecolor{green}{rgb}{0,0.61,0.33}
%\definecolor{blue}{rgb}{0,0.3,0.65}
%\definecolor{red}{RGB}{255,99,71}

%\usepackage{xargs}
%\newcommandx{\chris}[1]{{\color{blue} \textit{(C)} #1}}
%\newcommandx{\sophie}[1]{{\color{purple} \textit{(J)} #1}}
%\newcommandx{\change}[1]{{\color{orange} #1}}
%\newcommandx{\strike}[1]{\change{\sout{#1}}}

%\newcommandx{\chris}[1]{#1}
%\newcommandx{\sophie}[1]{#1}
%\newcommandx{\change}[1]{#1}
%\newcommandx{\strike}[1]{}

%\hyphenpenalty=0
\usepackage[acronyms,shortcuts]{glossaries}
\renewcommand*{\acronymfont}[1]{\mbox{#1}}
\hyphenpenalty=1
\tolerance=1000
%\let\oldnewacronym\newacronym
%\renewcommand\newacronym[3]{\hyphenation{#2}\oldnewacronym{#1}{#2}{#3}}

\hyphenation{Li-dar Map-ping and In-ter-pre-ta-tion En-vi-ron-ment}
\hyphenation{Dis-crete}
\hyphenation{In-ter-po-la-tion}
\hyphenation{di-gi-tal}
\hyphenation{ele-va-tion}
\hyphenation{mo-del}
\input{acronyms}

\journal{Computers \& Geosciences}

%%%%%%%%%%%%%%%%%%%%%%%
%% Elsevier bibliography styles
%%%%%%%%%%%%%%%%%%%%%%%
%% To change the style, put a % in front of the second line of the current style and
%% remove the % from the second line of the style you would like to use.
%%%%%%%%%%%%%%%%%%%%%%%

%% Numbered
\bibliographystyle{model1-num-names}

%% Numbered without titles
%\bibliographystyle{model1a-num-names}

%% Harvard
%\bibliographystyle{model2-names.bst}\biboptions{authoryear}

%% Vancouver numbered
%\usepackage{numcompress}\bibliographystyle{model3-num-names}

%% Vancouver name/year
%\usepackage{numcompress}\bibliographystyle{model4-names}\biboptions{authoryear}

%% APA style
%\bibliographystyle{model5-names}\biboptions{authoryear}

%% AMA style
%\usepackage{numcompress}\bibliographystyle{model6-num-names}

%% `Elsevier LaTeX' style
%\bibliographystyle{elsarticle-num}
%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}\setlength\emergencystretch{1.5em}

\begin{frontmatter}

\title{Interactive interpretation of 3D surfaces in field-based geosciences using mobile devices - concepts, challenges and applications}
%\title{Digital Geosciences on Mobile Devices - Concepts, Challenges and Applications}
%\tnotetext[mytitlenote]{Fully documented templates are available in the elsarticle package on \href{http://www.ctan.org/tex-archive/macros/latex/contrib/elsarticle}{CTAN}.}

%% Group authors per affiliation:
%\author{Elsevier\fnref{myfootnote}}
%\address{Radarweg 29, Amsterdam}
%\fntext[myfootnote]{Since 1880.}
%\ead[url]{www.elsevier.com}

%% or include affiliations in footnotes:
%\author[anonymous]{Anonymous\corref{correspondence}}
%\cortext[correspondence]{Corresponding author}
%\ead{anonymous}

\author[tudresden]{Melanie Kr\"{o}hnert\corref{correspondence}}
\cortext[correspondence]{Corresponding author}
\ead{melanie.kroehnert@tu-dresden.de}

\author[cerege,dtu]{Christian Kehl}
\ead{chke@dtu.dk}


\author[cerege]{Sophie Viseur}
\ead{viseur@cerege.fr}

\author[uniresearch,uib]{Simon J. Buckley}
\ead{Simon.Buckley@uni.no}

%\address[anonymous]{anonymous}
\address[tudresden]{Institute for Photogrammetry \& Remote Sensing, TU Dresden, Helmholtzstr. 10, 01069 Dresden, Germany}
\address[cerege]{Aix Marseille Universit\'{e}, CNRS, IRD, CEREGE UM 34, Dept. Sedimentary and Reservoir Systems, 13001 Marseille, France}
\address[uniresearch]{Uni Research AS -- CIPR, Nyg{\aa}rdsgaten 112, 5008 Bergen, Norway}
\address[uib]{Department of Earth Science, University of Bergen, All\'{e}gaten 41, 5007 Bergen, Norway}
\address[dtu]{}


\begin{abstract}

\end{abstract}

\textbf{Highlights} \\
\begin{itemize}
\item point 1
\item point 2
\item point 3
\item point 4
\item point 5
\end{itemize}

\begin{keyword}
discrete geometry\sep surface reconstruction\sep volume reconstruction\sep surface parameterization\sep digital outcrops
\MSC[2010] 00-01\sep  99-00
\end{keyword}

\end{frontmatter}

\linenumbers

\section{Introduction}
\label{sec:introduction}

\begin{itemize}
\item computing equipment continuously elevates the analytical capabilities for solving geoscientific problems
\item large drawback on computing equipment: the more powerful it is, the more stationary it is
\item geoscience disciplines such as hydrology, geology or glaciology are driven by outdoor experiments that prohibit bulky equipment
\item the advent of mobile computing equipment, such as smartphones and tablets, provides a possible solution to the equipment problem
\item form factor of mobile devices is small enough to allow every field-related geoscientist to carry one in the field
\item as seen is popular articles, the range of available devices increases, which allows to find a devices fit-for-purpose to each situation
\item range of devices also comes with a range of capabilities that influence their usability for specific field tasks
\end{itemize}

\begin{itemize}
\item availability of small form factor devices is only on part contribution to making digital geosciences more ''mobile``
\item availability and easy access to geoscience data (e.g. domain-specific maps, \glspl{DEM}, surface models in 3D) is equally important to perform combined digital- and field analysis
\item while basemap access on mobile devices is trivial, surface-scanned data in form of point clouds and (textured) triangulated meshes is becoming increasingly available with novice-operable \gls{SfM} software and drones
\item crowdsourced data and \gls{VGI} provides numerous data for domain-specific analysis, which is facilitated by easier data capture from amateur scientists using mobile devices
\end{itemize}

\begin{itemize}
\item In order to connect data and devices in the field, domain-specific mobile software is required
\item the difficulties in mobile software development stem from the specific demands and challenges for mobile software, such as energy efficiency, multi-manufacturer support, smart sensor utilisation [add and expand]
\item with the emergence of new application cases, which are demonstrated and discussed in this article, and an increasing interest from geoscience- and computer technology industry, a significant rise in the mobile software availability for geoscience problem solving is expected for the near-term future
\end{itemize}

\begin{itemize}
\item Even considering the fast technological development, some challenges around mobile device development exists that are rooted in the technology itself
\item several techniques and methods - such as \gls{SfM}, \gls{VR} or \gls{AR} - have been demonstrated to work on small-scale lab studies in computer science itself
\item translation and adaptation of these techniques to specific geoscience case studies and domain-specific issues is prohibited by scale and reliability
\item Other challenges influencing mobile digital geosciences are short-comings in geo-localization accuracy, object matching- and registration accuracy, geometric- and photometric data processing, data volumes and the availability of off-the-shelf program codes to common problems in computing
\item these problems are already familiar to disciplines such as software engineering, photogrammetry and data science for established computing platforms (e.g. PCs, workstations, laptops)
\item there are also problems specific or exclusive to mobile device processes, which are discussed in detail in this article
\item they contain issues such as device variability, power consumption and computing efficiency (i.e. fast calculations with drastically limited computing capabilities)
\end{itemize}

\begin{itemize}
\item For the next sections, the article adheres to following structure:
\item First, use cases are presented as opening statements to introduce task that are exclusively addressed by mobile devices in the digital geosciences
\item Secondly, the basics for 3D digital processing for our cases are presented. The overview is limited to the applied concepts to mobile devices and the extensions necessary to make the mapping to such devices.
\item Then, algorithms that are key to the digital geosciences outdoors are presented. The overview is also meant to highlight that alternative methods are available to achieve the target tasks
\item Fourth, the algorithms are mapped to the specific mobile technologies and components. The technologies and major parameters that impact geoscience problem applicability are highlighted.
\item Finally, we showcase and discuss how available mobile systems are used in application scenarios from hydrology and petroleum geology to improve analysis processes, help disseminating acquired knowledge and integrate outdoor measurements in digital workflows
\item Then, the article is finalized with some concluding remarks and a discussion for future developments in this research trajectory
\end{itemize}

\section{Target case studies}
\label{sec:case_studies}

TO-BE-FILLED

\section{Representation basis -- Geometry and Radiometry}
\label{sec:representations}

Various representation forms for 3D terrain data are available. While early digital systems used \glspl{DEM} for their simplicity and compact storage \cite{Trinks2004,McCaffrey2005,MANYMORE}, \glspl{DSM} and \glspl{TIN} are dominating most terrain-based systems for application-specific analysis. Examples can be seen at ... for glaciology, where the authors use ... for the terrain representation. The same application of ... can be observed for climate studies, as in ... . In this context, it is important to distinguish geometrically valid \glspl{TIN} from polygon soup surfaces. While the latter is often employed in early stages of mesh-based software systems due to its simplicity and ease of implementation, valid \glspl{TIN} are employed in mature stages of the analysis. This is because some automated analysis (e.g. auto-interpretation, volume derivation) require clean surfaces with coherently outward-oriented surface normals.

In geoscience domains such as petroleum geology, texture- and color information are vital for interpretation- and analysis tasks. In these cases, as demonstrated by Buckley et. al \cite{Buckley2008} and Caumon et. al, the \gls{TIN} is supplemented with photographic information that is projected on the surface as textures. As it is also possible to project textures from outside the visible spectrum as supplementary information on the surface \cite{Kurz2011}, we generalize for the remainder of the article that the model in question consists of its geometric and radiometric information.

[EXAMPLE PHOTO FROM LIME]

\sout{In other geoscience domains, such as hydrology and free surface flow management, colored point data streams are used as models, which are provided by drones and \gls{SfM}. In general, applications that rely on data throughput and large-scale analysis more commonly employ colored ''point cloud`` models because of their rapid procvessing and the skip of surface triangulation. Presentation techniques (i.e. rendering) are in these cases adapted versions of \gls{PBR} \cite{Kobbelt2003, Risunkiwicz2006}. Examples of point-based surface analysis in hydrology can be found in Leskens et. al \cite{Leskens2015}, whereas \gls{VRGS} is an example software for petroleum geology that employs similar techniques (see Rarity et. al \cite{Rarity2014}).} \textbf{HERE MELANIE'S PASSAGE}



The stated base concepts of geometric and radiometric model information and their representations are also valid for mobile device software. Because of the limited processing speed of mobile chipsets, a tendency for employing point cloud models on mobile devices (as Pintus et. al \cite{â¢} and Garcia et. al \cite{â¢}) can be observed. A drawback of point cloud models is their sparse nature, which prohibits continuous analysis of field data. Therefore, \glspl{DEM} have seen a revival in the mobile computing domain because they provide dense, closed geometric models that can be rendered and processed very effectively. Furthermore, with the inferior memory capacity of mobile devices in comparison to laptops and workstations, it is advantageous to be able to aggressively compress the data for mobile use, which is facilitated both by point clouds and \glspl{DEM}. Base mapping applications such as Open Street Maps \footnote{asdas} and Google Maps \footnote{asdas} use ... as their main 3D data representation. Other systems within the geosciences processing 3D data on mobile devices, such as ''Outcrop`` and \gls{GRIT}, employ genuine textured triangulated \gls{DSM}.

The form of model representation chosen significantly impacts the algorithms and analytical capabilities employed on the mobile device. Although all algorithms presented in this article work on either form of representation, some of the algorithms favor the treatment of triangulated surfaces (e.g. image-to-geometry registration, guided interpretation), while others clearly favor point-based representations (e.g. \gls{SfM} and rendering).

\section{Algorithms}
\label{sec:algorithms}

This section demonstrates novel- as well as existing algorithms and methods on mobile devices that are used for solving analysis tasks in the geoscience use cases laid out in section \ref{}. As mentioned before, the effectiveness of each algorithm depends on the applied model representation.

\subsection{Structure-from-Motion (SfM) and  Visual Simultaneous Localization and Mapping (Visual SLAM)}

\begin{itemize}
\item \sout{short description what it does}
\item \sout{how is it generally employed}
\item \sout{relation to mobile devices}
\item \sout{approaches and implementation known on mobile devices}
\item integration to the above-mentioned use cases
\end{itemize}

\gls{SfM} and visual \gls{SLAM} aim at automatically reconstructing a 3D environment from a stream of images \cite{â¢}. The output of these 3D reconstruction methods are colored point sets (i.e. point clouds). The technique is employed in the geosciences to acquire and measure 3D surfaces and terrain either via a manually collected photo set, or by using drones \cite{â¢}. The large potential for these algorithms on mobile devices being used directly in the field is that no other equipment was needed the generation of the digital 3D data used for analysis. A powerful mobile devices, such as the Project Tango\footnote{â¢} or NVIDIA Shield\footnote{â¢}, is capable of 3D terrain data collection in realtime directly in the field.

Because of the large potential to all branches in the geosciences to deliver on-spot data acquisition, several research groups have conducted research into that topic. \textbf{FILL IN PARTS FROM THE THESIS HERE!}

A problem with the listed approaches is their lack of maintenance. There is no readily-available software to this date in the mobile app stores that allows real-time SLAM or SfM. Reasons for the disappearance on previous prototypes can vary, but a major problem is the speed of development for mobile devices. As new operation system versions are published on a half-year to yearly basis, it means that software gets deprecated very rapidly. If no industrial partner cares to maintain and market a given research prototype, then that is vanishing from the mobile software market quickly.

\subsection{Image-to-geometry registration}

\begin{itemize}
\item \sout{short description what it does}
\item \sout{how is it generally employed}
\item \sout{relation to mobile devices}
\item \sout{approaches and implementation known on mobile devices}
\item integration to the above-mentioned use cases
\end{itemize}

Image-to-geometry algorithms aim at registering a 2D image to a given 3D surface, providing a transformation from 2D coordinate system to 3D coordinate system as follows:

\begin{eqnarray}
P' &= \begin{pmatrix}
u \\ v \\ w
\end{pmatrix} &= [ R_{3,3} | T_{1,3} ] \cdot P \\
P &= \begin{pmatrix}
x \\ y \\ z
\end{pmatrix} & \\
P' &\in \mathds{R}^2 &= \frac{P'}{w}
\end{eqnarray}

Using this coordinate system transformation on combination with a known interior camera orientation, it is possible to projectively map entire images on the surface just as surface texturing does. It is also possible to map specific objects on the image, such as image-based interpretations, on the surface. In the geosciences, these algorithms are employed to create a direct correlation between 3D model and the screen- or image space on which annotations and interpretations are based on \cite{Kehl2016}. The technique is also employed to provide texture mappings for multi-layer images, such as hyperspectral data or domain-specific thematic maps.

\begin{itemize}
\item feature-based registration: detect prominent points or edges in the input 2D images and a rendered representation of the 3D model
\item different concept for registration: 
\begin{itemize}
\item for mesh models, 2D feature locations are raycasted using camera projection and the 3D model in background; 3D feature location determined upon ray-plane intersection
\item for point-based models, raycasting doesn't directly work as point cannot be intersected; prominent solution is employing a smart rendering technique that expands the point into an area, and generate a depth map; after depth map generation, the 3D coordinate of a 2D feature map can be read directly from the depth map; drawback of the method / offset for speed: accuracy limitation of depth maps; high-resolution depthmaps (above $512^2$) cost a lot of performance
\end{itemize}
\item registration then has source- and target 2D-3D point pairs (in a normalized manner) that are put into a least-squares optimization system (give math here)
\item optimization system usually non-linear, usually employing Levenberg-Marquardt optimization schemes \cite{Kehl2016_3DNO}
\item largest challenges for feature-based registration: (a) reliable feature correlation and (b) optimization stability; useful constraints can employed in both cases -- such as horizon information, building edges, object outlines -- to increase the registration reliability and accuracy
\item employing constraints is highly application-dependent
\end{itemize}

\begin{itemize}
\item feature-based registration techniques most prevalent on mobile devices due to execution speed, implementation ease and so forth
\item examples of mobile implementation: \cite{Gauglitz2014,Sweeny2015,Kehl2017_PHOR,KroehnertXYZ}
\item drawback of feature-based methods: reliability and instability to imaging variances (discussed later in this article)
\item a contrasting technique commonly achieving more accurate results: mutual information
\item idea: pixel-wise comparison between 2D input image and 2D rendering of 3D scene; if both images match (meaning: $argmin \delta(I_{2D}, I_{3D}')$), then registration is completed
\item mutual information \cite{Viola1999} use notion of self-information and entropy to measure $\delta(I_{2D}, I_{3D}')$
\item challenge: optimization of 7 degree-of-freedom system over such overdetermined system (i.e. each image pixel results in 2 equations for the optimization scheme) unstable and prone to local minima
\item only optimization known to provide stable results is NEWUOA (i.e. Powell's method) \cite{Corsini2013}; 
\item has recently been employed in an earth science case for \gls{LiDAR} registration \cite{Guislain2016}
\item not available for mobile devices until now
\end{itemize}

\begin{itemize}
\item in terms of usability on mobile devices (why should we want to have that on mobile devices), projection of image-based information is vital on mobile devices
\item because of interaction difficulty, image-based interpretations on 3D surface data is preferable
\item it is potentially advantageous, in terms of power consumption, to implement data interaction in 2D rather than 3D; a hypothesis proven by experiment in this article
\item as it directly relates to the interactive component of the geoscience app, it has to be executed in real-time on the device instead of an offline process
\end{itemize}

\subsection{Data presentation and rendering}

\begin{itemize}
\item \sout{short description what it does}
\item \sout{how is it generally employed}
\item \sout{relation to mobile devices}
\item \sout{approaches and implementation known on mobile devices}
\item integration to the above-mentioned use cases
\end{itemize}

\begin{itemize}
\item rendering the 3D model in this context refers to generation of image generation of 3D model by projective rasterization of model data to 2D imaging plane of a virtual camera
\item rendering is performed to view the 3D model on the mobile device
\item also employed to generate a reference image used in the image-to-geometry registration and the annotation and interpretation of the data
\item major concepts: mesh-based rendering and \gls{PBR}
\item technical details on how this is done covered in the technology section \ref{}
\end{itemize}

\subsubsection{Mesh-based rendering}

\begin{itemize}
\item well-known concept
\item mesh is transferred as vertex set and primitive set (i.e. triangles or polygons, depending on employing \gls{TIN} or polygonal soup geometry) to graphics processor
\item virtual camera is set up as projective view matrix
\item primitives are positions in 3D scene via model transformation matrix
\item rasterizer projects information to camera plane and transforms continuous data into discrete pixel-based representation
\item in-time decompression can be optionally employed (see \cite{BorgeatXYZ})
\item texturing is employed to map image information on the surface; correlation between surface patches and texture images established explicitly beforehand or implicitly defined by geographic coordinate systems (e.g. WGS84 or UTM) for georeferenced surface
\end{itemize}

\subsection{A novel approach to mobile point-based rendering}

TO BE FILLED BY MELANIE

\subsection{Interpretation and annotation}

\begin{itemize}
\item short description what it does
\item how is it generally employed
\item relation to mobile devices
\item approaches and implementation known on mobile devices
\item integration to the above-mentioned use cases
\end{itemize}



\section{Technology}
\label{sec:technology}

\subsection{Sensors}

\subsubsection{Localization}

\begin{itemize}
\item references: ...
\end{itemize}

\subsubsection{Orientation}

\begin{itemize}
\item stability IMU (see 3D-NO)
\item precision IMU
\end{itemize}

\subsubsection{Parameter sensitivity}

\subsection{Graphics}

\begin{itemize}
\item as explained above, rendering 3D data is a key part for conducting annotations on 3D data, either based on 3D geometry itself or correlated images in camera space
\item for mobile devices, this can technologically be realized two-fold, depending on the usage constraints
%\item software- vs hardware renderer
\item generally, rendering stages (image-place projection, rasterization, tesselation \& lighting, see \cite{REDBOOK}) can be realised by means of software or by handware support
%\item in a software environment, the rendering stages are computed on the CPU
\item here, compute operations (gaussian smooting, derivative computations, vertex projection) are implemented on the mobile device CPU by available operations and libraries using the Android SDK (Java) and Android NDK (C++) on Google's Android system and Swift and Objective-C on Apple's iOS platform
\item software-based rendering is more flexible in how operations are carried out as they do not need to account for hardware-specific processing pipelines; in the realm of mobile devices, non-standard software-based rendering operations are supported by a wider range of devices
\item drawback of software-based rendering is performance as it makes suboptimal use newer computing capabilities and graphics-specific chipset operations
\item example is the novel rendering approach for point-based rendering introduced in section \ref{}, which requires implementation flexibility
\item most 3D rendering is done, even on mobile devices, with hardware-based rendering to varying degrees
\item even when implementing specific rasterization algorithms (see section \ref{}), operations such as vertex projections and tesselation \& lighting are performed on the GPU
\item hardware-based rendering on mobile devices is facilitated by Khronos' \gls{GLES} \cite{} on specialised mobile device graphics chips (e.g. Qualcomm Adreno, ARM Mali, NVIDIA Tegra)
\item in comparison to software-based rendering, hardware acceleration provides improved performance
\item drawbacks of hardware implementations are considerably longer development cycles, because the programming principles of GPUs differ considerably from common ''App programmingÂ´Â´, and reduced flexibility on what can be realised
\item for geoscientists and domain experts in the field, the distinction is good to be aware of as accelerated graphical apps for solving domain-specific tasks are usually offered as paid services to offset the increased development costs
%\item web-rendering
\item external circumstances and project constraints may govern implementation details for graphical systems
\item major constraint imposed in this context is internet availability
\item applications that are expected to operate in an urban setting or in well-developed infrastructure environments can make use of internet access
\item this allows the externalisation of rendering tasks for 3D models and data to a network-oriented client-server architecture as in Ponchio et al. \cite{Ponchio2016}
\item field experts that use apps and require 3D-rendered information can submit rendering requests to a remote server that takes over the image generation of the 3D data
\item technically, the app then only transmits metadata about storage location of the 3D data and receives the final, rasterised image, which allow energy-efficient operability 
\item furthermore, the process is agnostic to the specific mobile device generating the request, so this way of implementation works in the exact same manner for all mobile device regardless of the system manufacturer (e.g. Google, Apple, Microsoft)
\item the reduced process load by externalising the rendering tasks allows using advanced algorithms for sensor tracking \cite{} for improved localisation and orientation or augmented reality \cite{} for information overlays and multimedia content
%\item rendering-on-device
\item in other geoscientific settings, such as field geology \cite{} and environmental monitoring \cite{} of remote areas, internet access is either restricted or expensive to establish
\item subscription to satellite network with the required data rate costs around 70 euro per month \$ (see \url{www.skydsl.eu}, skyDSL2+ flatrate with 30 MBit/s download); data rate needed as high-resolution images with real-time rendering rates (uncompressed 1920x1080 pixels resolution at 30 frames/s amounts to 1.39 GBit/s) requires highest data rates even when employing advanced compression techniques
\item thus, for geoscience applications that operate in remote areas, web-based rendering is not an option
\item in these cases, rendering needs to be done on the device
\item for on-device rendering, the 3D data need to reside in the device memory and image generation needs to be done with performance-restricted hardware
\item as is shown in section \ref{}, on-device rendering has considerable impact on the energy consumption
\item on-device rendering that processes realistic field data requires considerable implementation efforts, as demonstrated by apps such as OpenWaterLevel \cite{}, GRIT \cite{} and Outcrop \cite{}
\item principle scientific advances in mobile device rendering have demonstrated considerable progress over the years \cite{Garcia2015,Kehl2015a,Agus2017}
\item scaling up smaller laboratory results with mobile graphics to realistics geoscience data, in terms of image quality and resolution as well as 3D base data, is a persisting challenge
\item although technical development continuously provides more powerful devices, mobile devices need to sacrifice capabilities such as sensor availability as well as physical size and weight in order to provide larger memory space and higher-performance processors; examples for this trade-off manufacturing can be seen in special-purpose and high-performance tablets such as NVIDIA Shield \ref{}, Project Tango \ref{} and Google Pixel C \ref{}
%\item hardware differences: speed, capability, CUDA
\item an specific problem for geoscientists and domain experts in on-device rendering settings: trade-off between app response time, image quality, hardware utilization and cross-device operability
\item in interviews amongst field geologists at the department of earth science at university of Bergen, a major demand from the target user base of such mobile app is interoperability between Android, Microsoft and Apple devices; demand originates from platform-agnostic working of common geoscience software on desktop computers for Apple and Windows
\item on the other hand, app responsiveness and high image quality are amongst the next common priorities behind interoperability; user base asks for improved quality when operating advanced equipment (e.g. special-pirpose tablets, novel- and high-performance tablets)
\item both demands are conflicting, as making use of specialised hardware (e.g. 64-bit, \gls{SSE} and vectorisation, parallel processing and GPU Computing such as CUDA \ref{} for image processing \cite{Heymann2007,Hudelist2014}, texture compression \cite{}) in turn means reducing the range of devices being able to operate the software
\item these technologies are key as they provide technical solutions available right now to achieve the required responsiveness and image quality
\end{itemize}

%\subsection{Component differences between devices}
%
%\begin{itemize}
%\item camera
%\end{itemize}

\subsection{Power consumption}

\begin{itemize}

\end{itemize}


\section{Applications and Requirements}
\label{sec:applications}
Due to the increasing usability of mobile devices for in the field annotations, several use cases concerning geosciences has become apparent. In the following, two essential 

\subsection{Derivation of hydrological parameters: Water level gauging}
\label{sec:water_level_gauging_intro}
The last decade is characterized by a continued increase of globally devastating flash floods after heavy rainfalls. Even smallest creeks turned into hazardous streams causing flooding and landslides. Conventional gauging stations provide precise information about water levels measured over a short time period. State of the art techniques for administrative observation comprise water pressure sensors, floating gauges and conventional tide gauges. They are characterised by long-term stability and outdoor robustness providing accuries of several millimeters up to one centimeter \cite{Siedschlag2015}. Averaged over defined time intervals, it is advisable to remain caution regarding these accuracies may be too optimistic \cite{Horner2018} . 
 
Because of high costs in purchase and maintenance, gauging stations with complex sensing devices must be sparsely installed. A prime example here is the hydrological network in Saxony, Germany. Here, 184 gauging stations are installed for permanent observation on 154 of 259 rivers rising from small, medium and large catchments \cite{Saxon2018, Buettner2015}. Thus, around a third is not monitored neither during flood events when the most protection is required. Recently, commercial smartphone applications arose to enable crowd-sourcing based water level estimation for, among other things, such cases \cite{CrowdWaterApp2017a, Kisters2014}. But all of them have one thing in common: the water level is entered manually by engaged citizen scientists finding and photographing tide gauges close to rivers that makes - on the one hand a potential danger to themselves (f.e. by sudden landslides), and still limits on the other the approaches to open and visible gauges.

Improvements in this sense can be achieved through \textit{image-2-geometry intersection} and 3D annotation for automatic water level determination without reference gauges for almost every situation regarding running waters. 
for this, the smartphone application \textit{Open Water Level} that bases on the freely available open source camera framework \textit{Open Camera} \cite{Harman2017}. Open Water Level allows for free stationing water line detection using short hand held time-lapse image sequences (for details please refer to \cite{Kroehnert2017}). To interpret these, image measurements must be transformed into object space. Thus, exterior information needs to be provided by smartphone sensors for orientation and positioning.

\subsubsection{Requirements applying to the sensors}
\label{sec:water_level_gauging_requirements_sensors}
To solve the task of autonomous water level determination on running rivers f.e. emergency cases using \textit{image-2-geometry intersection}, citizen scientists position and orientation must be know. As figured out in \ref{sec:technology}, smartphone sensors accuracies for orientation and location are highly dependent on user's environment. Especially the strong correlation of heading and disturbing magnetic sources may be a issue must be solved specifically related to running rivers where metal railings usually exists. Similar effects can also be noted using high-end IMU systems for instance autonomous car navigation. But the magnetic influences inside cars are almost stable and can be calibrated during the drive (advanced navigation manual). For smartphone orientation, the magnetic strengths attaching the phone may change substantially in short time. A typical scenario would be: a citizen scientist walks along street, taking his phone inside the baggage close to metallic keys. While walking he passes several street lamps, signs, etc. Finally, he arrives at a bridge over a urban river, takes out the phone, looks down to the river and records the time lapse image sequence a few centimetres above a metallic railing. Meanwhile, several cars passing the same bridge. In this simple use case, the magnetic field around the smartphone changes countless times due to several unpredictable disturbances \textcolor{red}{(table_mag_disturb)} \cite{Blum2013}.
\\The heading angle has the highest influence compared to pitch and roll regarding 2D image and 3D object data registration. For this, a so-called synthetic image is rendered from colored 3D reference point clouds using scientist's location and orientation to define a situation-dependent bounding box of points to be projected onto image plane with respect to depth and indentations (see \cite{Boerner2016}). Thereby the heading defines the rotation of the depth direction, as a false angle gives a false viewing direction resulting in a synthetic image that has no similarity or only a little with the time lapse sequence. However, in case of no similarity and thus no possible solution for \textit{image-2-geometry intersection}, simply no water level can be calculated. But in case of slight overlapping, there might be image matches but with very bad distribution that impedes a correct positioning \textcolor{red}{(fig_heading_test)} and may lead to even worse results of false water levels.
\\It is obvious that a second source for destructive results exists: the absolute geo-positioning using smartphones currently installed GNSS receivers. In urban scenes with several shadow effects due to high-rise buildings, errors of several meters in latitude and up to more than 30 meters in height are highly possible where even the weather has impact \cite{Bauer2013, Blum2013, Zandbergen2011}. It is likely that, in the near future, smartphone's GNSS modules will be improved solving lateral accuracies of 50 centimetres \cite{Moore2017}.\\
For now, possible relief might come including other sources for positioning like digital elevation models for simple height correction or invoke map services that allows the user for position refinement. For this, some APIs are already provided by Google \textcolor{red}{(quellen)} but they are rather cost-expensive by extensive accessing. Another upcoming option is including barometers in sensor fusion, altitude can be measured within three meters \cite{Liu2014} but for now, they are not a standard.


\begin{itemize}
\item(table, observation heading during water line detection outside $\rightarrow$ check magnetic strengthens and there changes over short times)
\item (figure/table, sensitivity analysis  $\rightarrow$ heading changed in terms of 10 degrees, what does it make for)
\end{itemize}


\subsubsection{Requirements applying to the scenario}
\label{sec:water_level_gauging_requirements_situation}



\begin{itemize}
\item \textit{online processing and position refinement: need online connection}
\item \textit{image quality for water line detection: influence of image resolution, lightning, ...)}
\end{itemize}





\begin{itemize}
%\item recap: task to be solved
%\item main requirements for (location- and orientation) sensor accuracy and geometric accuracy
%\item specific requirements to this use case: data availability; illumination; device range to cover
\item available approach to address the task
\end{itemize}

\subsection{Field Geology}

\begin{itemize}
\item recap: task to be solved
\item main requirements for (location- and orientation) sensor accuracy and geometric accuracy
\item specific requirements to this use case: data availability; illumination; network inavailability
\item available approach to address the task
\end{itemize}

\subsection{Virtual Field Trips}

\begin{itemize}
\item recap: task to be solved
\item main requirements for (location- and orientation) sensor accuracy and geometric accuracy
\item specific requirements to this use case: data availability; illumination; network inavailability
\item available approach to address the task
\end{itemize}

\subsection{The digital fieldbook}

\begin{itemize}
\item recap: task to be solved
\item main requirements for (location- and orientation) sensor accuracy and geometric accuracy
\item specific requirements to this use case: device range to cover; data integration; no network
\item available approach to address the task
\end{itemize}


\section{Conclusions}
\label{sec:conclusions}

which problems are sufficiently solved ? 
which challenges remain that have already been discussed

\section{Discussion}
\label{sec:discussion}

\begin{itemize}
\item porting existing desktop algorithms on mobile devices [quick and fast]
\item vegetation in scans
\item pre-processing of geodata for mobile use
\end{itemize}

\section*{References}

\bibliography{KroehnertKehl2018_MobileDigitalGeosciences}

\end{document}
